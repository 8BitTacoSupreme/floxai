version = 1

[install]
python313 = { pkg-path = "python313" }
"python313Packages.pip" = { pkg-path = "python313Packages.pip" }
"python313Packages.fastapi" = { pkg-path = "python313Packages.fastapi" }
"python313Packages.uvicorn" = { pkg-path = "python313Packages.uvicorn" }
"python313Packages.sqlalchemy" = { pkg-path = "python313Packages.sqlalchemy" }
"python313Packages.pydantic" = { pkg-path = "python313Packages.pydantic" }
"python313Packages.requests" = { pkg-path = "python313Packages.requests" }
"python313Packages.beautifulsoup4" = { pkg-path = "python313Packages.beautifulsoup4" }
"python313Packages.anthropic" = { pkg-path = "python313Packages.anthropic" }
"python313Packages.pandas" = { pkg-path = "python313Packages.pandas" }
"python313Packages.numpy" = { pkg-path = "python313Packages.numpy" }
"python313Packages.python-multipart" = { pkg-path = "python313Packages.python-multipart" }
"python313Packages.pydantic-settings" = { pkg-path = "python313Packages.pydantic-settings" }
"python313Packages.gitpython" = { pkg-path = "python313Packages.gitpython" }
"python313Packages.toml" = { pkg-path = "python313Packages.toml" }
"python313Packages.pyyaml" = { pkg-path = "python313Packages.pyyaml" }
"python313Packages.python-dotenv" = { pkg-path = "python313Packages.python-dotenv" }
"python313Packages.structlog" = { pkg-path = "python313Packages.structlog" }
"python313Packages.chromadb" = { pkg-path = "python313Packages.chromadb" }
"python313Packages.sentence-transformers" = { pkg-path = "python313Packages.sentence-transformers" }
"python313Packages.tiktoken" = { pkg-path = "python313Packages.tiktoken" }
nodejs = { pkg-path = "nodejs" }
git = { pkg-path = "git" }
curl = { pkg-path = "curl" }
sqlite = { pkg-path = "sqlite" }
jq = { pkg-path = "jq" }
tree = { pkg-path = "tree" }
fastapi.pkg-path = "python313Packages.fastapi"
uvicorn.pkg-path = "python313Packages.uvicorn"
sqlalchemy.pkg-path = "python313Packages.sqlalchemy"
pydantic.pkg-path = "python313Packages.pydantic"
requests.pkg-path = "python313Packages.requests"
beautifulsoup4.pkg-path = "python313Packages.beautifulsoup4"
anthropic.pkg-path = "python313Packages.anthropic"
pandas.pkg-path = "python313Packages.pandas"
numpy.pkg-path = "python313Packages.numpy"
python-multipart.pkg-path = "python313Packages.python-multipart"
pydantic-settings.pkg-path = "python313Packages.pydantic-settings"
gitpython.pkg-path = "python313Packages.gitpython"
toml.pkg-path = "python313Packages.toml"
pyyaml.pkg-path = "python313Packages.pyyaml"
python-dotenv.pkg-path = "python313Packages.python-dotenv"
structlog.pkg-path = "python313Packages.structlog"
chromadb.pkg-path = "python313Packages.chromadb"
sentence-transformers.pkg-path = "python313Packages.sentence-transformers"
tiktoken.pkg-path = "python313Packages.tiktoken"

[vars]
FLOXAI_VERSION = "1.0.0"
FLOXAI_API_PORT = "8000"
FLOXAI_UI_PORT = "3000"
CLAUDE_API_KEY = "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"
FLOXAI_DB_PATH = "$FLOX_ENV_PROJECT/data/floxai.db"
FLOXAI_VECTOR_DB_PATH = "$FLOX_ENV_PROJECT/data/vector_db"
FLOXAI_DOCS_PATH = "$FLOX_ENV_PROJECT/data/flox_docs"
FLOXAI_PROJECT_ROOT = "$FLOX_ENV_PROJECT"
FLOXAI_DEV_MODE = "false"
FLOXAI_LOG_LEVEL = "INFO"
PYTHONPATH = "$FLOX_ENV_PROJECT/backend:$PYTHONPATH"

[hook]
on-activate = '''
echo ""
echo "  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—"
echo "  â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘"
echo "  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘"
echo "  â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘"
echo "  â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘"
echo "  â•šâ•â•     â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•"
echo "  The Flox Development Co-pilot"
echo ""
echo "  ðŸŽ¯ Showcasing Flox for reproducible development!"
echo "  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "  ðŸ“¦ FLOX ENVIRONMENT:"
echo "     Name:     $FLOX_ENV_NAME"
echo "     Path:     $FLOX_ENV_PROJECT"
echo "     Python:   $(python3 --version 2>&1) [Flox-managed]"
echo "     Node:     $(node --version 2>&1) [Flox-managed]"
echo "     Platform: $(uname -m)-$(uname -s | tr [:upper:] [:lower:])"
echo ""
echo "  ðŸŒŸ FLOX ADVANTAGES:"
echo "     âœ“ Cross-platform (macOS/Linux)"
echo "     âœ“ No Docker required"
echo "     âœ“ Native performance"
echo "     âœ“ Reproducible everywhere"
echo ""

mkdir -p $FLOX_ENV_PROJECT/data/vector_db $FLOX_ENV_PROJECT/data/flox_docs

if [ ! -f "$FLOX_ENV_PROJECT/.flox-py-deps" ]; then
  echo "  ðŸ“¦ Installing Python dependencies..."
  python3 -m pip install --upgrade pip
  python3 -m pip install -r $FLOX_ENV_PROJECT/backend/requirements.txt
  touch $FLOX_ENV_PROJECT/.flox-py-deps
  echo "  âœ… Python dependencies ready!"
fi

if [ ! -d "$FLOX_ENV_PROJECT/frontend/node_modules" ]; then
  echo "  ðŸ“¦ Installing Node.js dependencies..."
  cd $FLOX_ENV_PROJECT/frontend && npm install && cd $FLOX_ENV_PROJECT
  echo "  âœ… Node.js dependencies ready!"
fi

if command -v tree >/dev/null 2>&1; then
  echo ""
  echo "  ðŸŒ³ PROJECT STRUCTURE:"
  tree -L 2 -I "node_modules|__pycache__|.venv" $FLOX_ENV_PROJECT | head -15
fi

echo ""
echo "  ðŸš€ FLOXAI MODES:"
echo "     floxai-setup  - Interactive setup & initialization"
echo "     floxybot      - Standalone mode (general Flox/Nix AI)"
echo "     floxybotdev   - Context-aware development mode" 
echo "     floxai-demo   - Flox capabilities showcase"
echo ""
echo "  ðŸ’¡ Next: Run 'floxai-setup' to get started"
echo ""
echo "  ðŸš€ Quick Start:"
echo "     floxai        - Start complete FloxAI system"
echo "     start-floxai  - Alternative start command"
echo "     floxybot      - Standalone mode"
echo "     floxybotdev   - Context-aware mode"
echo ""
'''

[profile]
common = '''
export PATH="$FLOX_ENV_PROJECT/scripts:$FLOX_ENV_PROJECT:$PATH"
alias floxstatus="echo Flox Environment: $FLOX_ENV_NAME && flox list"
alias floxinfo="echo FloxAI v$FLOXAI_VERSION | Environment: $FLOX_ENV_NAME"
alias backend="cd $FLOX_ENV_PROJECT/backend"
alias frontend="cd $FLOX_ENV_PROJECT/frontend"
alias floxai="echo Starting FloxAI... && $FLOX_ENV_PROJECT/floxai-start"
alias start-floxai="echo Starting FloxAI... && $FLOX_ENV_PROJECT/floxai-start"
'''

