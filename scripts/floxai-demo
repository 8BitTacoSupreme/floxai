#!/bin/bash

echo "🎯 FloxAI Capabilities Demo"
echo "===========================" 
echo "Showcasing Flox's power for development environments!"
echo ""

if [ -z "$FLOX_ENV" ]; then
    echo "❌ This demo requires a Flox environment"
    echo "   Run: flox activate"
    exit 1
fi

echo "🔍 Environment Analysis:"
echo "   Flox Environment: $FLOX_ENV_NAME"
echo "   Platform: $(uname -m)-$(uname -s | tr '[:upper:]' '[:lower:]')"  
echo "   Python: $(python --version)"
echo "   Node.js: $(node --version)"
echo "   Git: $(git --version | head -1)"
echo ""

echo "📦 Flox-Managed Packages:"
which python node git curl sqlite3 jq gh 2>/dev/null | sed 's/^/   ✓ /'
echo ""

echo "🌍 Cross-Platform Demonstration:"
echo "   This exact environment works on:"
echo "   ✓ macOS Intel (x86_64)"
echo "   ✓ macOS Apple Silicon (ARM64)" 
echo "   ✓ Linux x86_64"
echo "   ✓ Linux ARM64"
echo ""

echo "⚡ Performance Benefits:"
echo "   ✓ Native binaries (no containerization overhead)"
echo "   ✓ Direct filesystem access"
echo "   ✓ Full system integration"
echo "   ✓ Hot reload for development"
echo ""

echo "🔧 Development Workflow:"
echo "   1. flox activate    - Enter environment"
echo "   2. floxybotdev      - Start development"
echo "   3. Edit code        - Hot reload works!"
echo "   4. exit            - Leave environment"
echo ""

if command -v tree >/dev/null 2>&1; then
    echo "🌳 Project Structure (via Flox-managed 'tree'):"
    tree -L 2 -I 'node_modules|__pycache__' . 2>/dev/null
    echo ""
fi

echo "🚀 FloxAI Features Enabled by Flox:"
echo "   ✓ Python FastAPI backend"
echo "   ✓ React TypeScript frontend" 
echo "   ✓ SQLite database"
echo "   ✓ AI/ML libraries (ChromaDB, sentence-transformers)"
echo "   ✓ Development tools (hot reload, linting)"
echo ""

if [ -f "data/floxai.db" ]; then
    echo "📊 FloxAI Usage Stats:"
    python backend/app/main.py --stats 2>/dev/null || echo "   (Start FloxAI to see usage statistics)"
else
    echo "📊 Ready for first use! Run 'floxai-setup' to initialize."
fi

echo ""
echo "💡 Why Flox Matters:"
echo "   Before: Complex setup, dependency conflicts, platform differences"
echo "   After:  One command, isolated environment, works everywhere"
echo ""
echo "🎉 FloxAI showcases the future of development environments!"
